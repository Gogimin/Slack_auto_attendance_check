# ì„œë²„ ë°°í¬ ê°€ì´ë“œ

## ë°°í¬ ì›Œí¬í”Œë¡œìš°

```
ë¡œì»¬ PC (ì„¤ì •) â†’ ì„œë²„ (ìë™ ì‹¤í–‰)
```

---

## 1ï¸âƒ£ ë¡œì»¬ PCì—ì„œ ìŠ¤ì¼€ì¤„ ì„¤ì •

### 1-1. í”„ë¡œê·¸ë¨ ì‹¤í–‰

**ë°©ë²• A: ë°°ì¹˜ íŒŒì¼ ì‹¤í–‰**
```bash
ì‹¤í–‰.bat ë”ë¸”í´ë¦­
```

**ë°©ë²• B: EXE ì‹¤í–‰**
```bash
dist\ìŠ¬ë™ì¶œì„ì²´í¬\ìŠ¬ë™ì¶œì„ì²´í¬.exe ë”ë¸”í´ë¦­
```

### 1-2. ì›¹ UI ìë™ ì—´ë¦¼

í”„ë¡œê·¸ë¨ ì‹¤í–‰ í›„ 1.5ì´ˆ ë’¤ ìë™ìœ¼ë¡œ ë¸Œë¼ìš°ì €ê°€ ì—´ë¦½ë‹ˆë‹¤:
```
http://127.0.0.1:5000
```

### 1-3. ìŠ¤ì¼€ì¤„ ì„¤ì •

1. **â° ìë™ ì‹¤í–‰ ìŠ¤ì¼€ì¤„** íƒ­ í´ë¦­
2. ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„ íƒ (ì˜ˆ: "ì„œìš¸ëŒ€í•™êµ")
3. **ì¶œì„ ìŠ¤ë ˆë“œ ìƒì„± ì‹œê°„** ì„¤ì •:
   - ìš”ì¼: `í† ìš”ì¼`
   - ì‹œê°„: `17:00`
   - ë©”ì‹œì§€: `ğŸ“¢ ì¶œì„ ìŠ¤ë ˆë“œ\n\nì˜¤ëŠ˜ ì¶œì„ ì²´í¬í•©ë‹ˆë‹¤!` (ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥)
4. **ì¶œì„ ì§‘ê³„ ì‹œê°„** ì„¤ì •:
   - ìš”ì¼: `í† ìš”ì¼`
   - ì‹œê°„: `18:00` (ìŠ¤ë ˆë“œ ìƒì„± í›„ 30ë¶„~1ì‹œê°„ ë’¤)
   - ì¶œì„ ê¸°ì… ì—´: `K`
5. **ì•Œë¦¼ ë°›ì„ ì‚¬ìš©ì ID** ì…ë ¥ (ì„ íƒì‚¬í•­):
   - ìŠ¬ë™ User ID (ì˜ˆ: `U01ABC123DEF`)
   - ì°¾ëŠ” ë²•: ìŠ¬ë™ â†’ í”„ë¡œí•„ í´ë¦­ â†’ "í”„ë¡œí•„ ë”ë³´ê¸°" â†’ í•˜ë‹¨ì˜ "ë©¤ë²„ ID ë³µì‚¬"
6. **"ìŠ¤ì¼€ì¤„ ì €ì¥"** ë²„íŠ¼ í´ë¦­

### 1-4. ì„¤ì • íŒŒì¼ í™•ì¸

ìŠ¤ì¼€ì¤„ì´ ì €ì¥ë˜ë©´ `workspaces/[ì›Œí¬ìŠ¤í˜ì´ìŠ¤ëª…]/workspace.json`ì— ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤:

```json
{
  "display_name": "ì„œìš¸ëŒ€í•™êµ",
  "slack_bot_token": "xoxb-...",
  "slack_channel_id": "C01ABC123",
  "spreadsheet_id": "1A2B3C...",
  "sheet_name": "Sheet1",
  "name_column": "B",
  "start_row": 2,
  "notification_user_id": "U01ABC123",
  "auto_schedule": {
    "enabled": true,
    "create_thread_day": "sat",
    "create_thread_time": "17:00",
    "create_thread_message": "ğŸ“¢ ì¶œì„ ìŠ¤ë ˆë“œ\n\nì˜¤ëŠ˜ ì¶œì„ ì²´í¬í•©ë‹ˆë‹¤!",
    "check_attendance_day": "sat",
    "check_attendance_time": "18:00",
    "check_attendance_column": "K"
  }
}
```

### 1-5. ì—¬ëŸ¬ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„¤ì •

ê° í•™êµ/ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë³„ë¡œ 1-3 ~ 1-4 ê³¼ì •ì„ ë°˜ë³µí•©ë‹ˆë‹¤.

### 1-6. í”„ë¡œê·¸ë¨ ì¢…ë£Œ

```
Ctrl + C
```

---

## 2ï¸âƒ£ ì„œë²„ì— ë°°í¬

### 2-1. í•„ìš”í•œ íŒŒì¼ ëª©ë¡

```
Slack_auto_attendance_check/
â”œâ”€â”€ app_flask.py              â† ë©”ì¸ ì„œë²„ íŒŒì¼
â”œâ”€â”€ requirements.txt          â† Python íŒ¨í‚¤ì§€ ëª©ë¡
â”œâ”€â”€ src/                      â† ì†ŒìŠ¤ ì½”ë“œ
â”‚   â”œâ”€â”€ workspace_manager.py
â”‚   â”œâ”€â”€ slack_handler.py
â”‚   â”œâ”€â”€ sheets_handler.py
â”‚   â”œâ”€â”€ parser.py
â”‚   â””â”€â”€ utils.py
â”œâ”€â”€ templates/                â† HTML í…œí”Œë¦¿
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ static/                   â† CSS/JS íŒŒì¼
â”‚   â”œâ”€â”€ css/
â”‚   â””â”€â”€ js/
â””â”€â”€ workspaces/               â† â­ ì„¤ì • íŒŒì¼ (ì¤‘ìš”!)
    â”œâ”€â”€ ì„œìš¸ëŒ€/
    â”‚   â”œâ”€â”€ workspace.json
    â”‚   â””â”€â”€ credentials.json
    â”œâ”€â”€ ì—°ì„¸ëŒ€/
    â”‚   â”œâ”€â”€ workspace.json
    â”‚   â””â”€â”€ credentials.json
    â””â”€â”€ ...
```

### 2-2. ì„œë²„ë¡œ íŒŒì¼ ì „ì†¡

**ë°©ë²• A: SCP ì‚¬ìš© (Linux/Mac)**
```bash
scp -r Slack_auto_attendance_check/ user@server.example.com:/home/user/
```

**ë°©ë²• B: SFTP ì‚¬ìš© (Windows - FileZilla, WinSCP ë“±)**
1. SFTP í´ë¼ì´ì–¸íŠ¸ë¡œ ì„œë²„ ì ‘ì†
2. ì „ì²´ í”„ë¡œì íŠ¸ í´ë” ì—…ë¡œë“œ

**ë°©ë²• C: Git ì‚¬ìš©**
```bash
# ë¡œì»¬
git init
git add .
git commit -m "Initial deployment"
git remote add origin https://github.com/your-repo.git
git push origin main

# ì„œë²„
git clone https://github.com/your-repo.git
cd your-repo
```

âš ï¸ **ë³´ì•ˆ ì£¼ì˜**: Git ì‚¬ìš© ì‹œ ë°˜ë“œì‹œ `.gitignore`ì— ì¶”ê°€:
```gitignore
workspaces/*/credentials.json
workspaces/*/workspace.json
.env
*.log
```

### 2-3. ì„œë²„ í™˜ê²½ ì„¤ì •

**Python ë° íŒ¨í‚¤ì§€ ì„¤ì¹˜:**
```bash
# Python 3.8 ì´ìƒ í™•ì¸
python3 --version

# ê°€ìƒí™˜ê²½ ìƒì„± (ì„ íƒì‚¬í•­)
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# ë˜ëŠ”
venv\Scripts\activate     # Windows

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt
```

---

## 3ï¸âƒ£ ì„œë²„ ì‹¤í–‰

### 3-1. ì§ì ‘ ì‹¤í–‰ (í…ŒìŠ¤íŠ¸ìš©)

```bash
python3 app_flask.py
```

**ì¶œë ¥ ì˜ˆì‹œ:**
```
==================================================
ìŠ¬ë™ ì¶œì„ì²´í¬ ê´€ë¦¬ ì‹œìŠ¤í…œ v2.0
==================================================
í˜„ì¬ ì‘ì—… ë””ë ‰í† ë¦¬: /home/user/Slack_auto_attendance_check
ì‹¤í–‰ íŒŒì¼ ìœ„ì¹˜: /home/user/Slack_auto_attendance_check

âœ“ ëª¨ë“  í´ë” í™•ì¸ ì™„ë£Œ

âœ“ 3ê°œì˜ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤

==================================================
ìŠ¤ì¼€ì¤„ëŸ¬ ì´ˆê¸°í™” ì¤‘...
==================================================

ğŸ“… ìŠ¤ì¼€ì¤„ ë“±ë¡: ì„œìš¸ëŒ€í•™êµ
  âœ“ ì¶œì„ ìŠ¤ë ˆë“œ ìƒì„±: ë§¤ì£¼ sat 17:00
  âœ“ ì¶œì„ ì§‘ê³„: ë§¤ì£¼ sat 18:00

ğŸ“… ìŠ¤ì¼€ì¤„ ë“±ë¡: ì—°ì„¸ëŒ€í•™êµ
  âœ“ ì¶œì„ ìŠ¤ë ˆë“œ ìƒì„±: ë§¤ì£¼ sun 19:00
  âœ“ ì¶œì„ ì§‘ê³„: ë§¤ì£¼ sun 20:00

âœ“ ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œì‘ ì™„ë£Œ (í•œêµ­ ì‹œê°„ëŒ€: Asia/Seoul)

==================================================
ì„œë²„ ì‹œì‘ ì¤‘...
==================================================
URL: http://127.0.0.1:5000
ì¢…ë£Œí•˜ë ¤ë©´ Ctrl+Cë¥¼ ëˆ„ë¥´ì„¸ìš”.
==================================================
```

### 3-2. ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰ (í”„ë¡œë•ì…˜)

**ë°©ë²• A: nohup ì‚¬ìš©**
```bash
nohup python3 app_flask.py > server.log 2>&1 &
```

**ë°©ë²• B: screen ì‚¬ìš©**
```bash
screen -S attendance
python3 app_flask.py
# Ctrl+A, Dë¡œ detach
# ì¬ì—°ê²°: screen -r attendance
```

**ë°©ë²• C: tmux ì‚¬ìš©**
```bash
tmux new -s attendance
python3 app_flask.py
# Ctrl+B, Dë¡œ detach
# ì¬ì—°ê²°: tmux attach -t attendance
```

**ë°©ë²• D: systemd ì„œë¹„ìŠ¤ (ì¶”ì²œ)**

`/etc/systemd/system/slack-attendance.service` íŒŒì¼ ìƒì„±:
```ini
[Unit]
Description=Slack Attendance Checker
After=network.target

[Service]
Type=simple
User=your-username
WorkingDirectory=/home/user/Slack_auto_attendance_check
Environment="PATH=/home/user/Slack_auto_attendance_check/venv/bin"
ExecStart=/home/user/Slack_auto_attendance_check/venv/bin/python3 app_flask.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

ì„œë¹„ìŠ¤ ì‹œì‘:
```bash
sudo systemctl daemon-reload
sudo systemctl enable slack-attendance
sudo systemctl start slack-attendance

# ìƒíƒœ í™•ì¸
sudo systemctl status slack-attendance

# ë¡œê·¸ í™•ì¸
sudo journalctl -u slack-attendance -f
```

---

## 4ï¸âƒ£ ìë™ ì‹¤í–‰ í™•ì¸

### 4-1. ìŠ¤ì¼€ì¤„ í™•ì¸

ì„œë²„ì—ì„œ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ë©´ ìŠ¤ì¼€ì¤„ì´ ìë™ìœ¼ë¡œ ë“±ë¡ë©ë‹ˆë‹¤.

### 4-2. ì‹¤í–‰ íë¦„

```
í† ìš”ì¼ 17:00 â†’ ìŠ¬ë™ì— ì¶œì„ ìŠ¤ë ˆë“œ ìë™ ìƒì„±
              "ğŸ“¢ ì¶œì„ ìŠ¤ë ˆë“œ\n\nì˜¤ëŠ˜ ì¶œì„ ì²´í¬í•©ë‹ˆë‹¤!"

(í•™ìƒë“¤ì´ ëŒ“ê¸€ ì‘ì„± - 30ë¶„~1ì‹œê°„)

í† ìš”ì¼ 18:00 â†’ ìë™ìœ¼ë¡œ ëŒ“ê¸€ ìˆ˜ì§‘
              â†’ êµ¬ê¸€ ì‹œíŠ¸ì— ì¶œì„ ê¸°ì…
              â†’ ìŠ¬ë™ ìŠ¤ë ˆë“œì— ì™„ë£Œ ëŒ“ê¸€
              â†’ ê´€ë¦¬ìì—ê²Œ DM ì „ì†¡
```

### 4-3. ë¡œê·¸ í™•ì¸

**í„°ë¯¸ë„ ì¶œë ¥:**
```
[ìë™ì‹¤í–‰] ì¶œì„ ìŠ¤ë ˆë“œ ìƒì„± ì‹œì‘ - ì„œìš¸ëŒ€í•™êµ
ì‹œê°„: 2025-10-16 17:00:00
âœ“ ì¶œì„ ìŠ¤ë ˆë“œ ìƒì„± ì™„ë£Œ: 1234567890.123456

[ìë™ì‹¤í–‰] ì¶œì„ ì§‘ê³„ ì‹œì‘ - ì„œìš¸ëŒ€í•™êµ
ì‹œê°„: 2025-10-16 18:00:00
âœ“ ì¶œì„ ìŠ¤ë ˆë“œ ë°œê²¬: 1234567890.123456
âœ“ ì¶œì„ì ìˆ˜: 45ëª…
âœ“ êµ¬ê¸€ ì‹œíŠ¸ ì—…ë°ì´íŠ¸ ì™„ë£Œ: 50ê°œ
âœ“ ì¶œì„ ì§‘ê³„ ì™„ë£Œ!
```

---

## 5ï¸âƒ£ ì„œë²„ ì¢…ë£Œ

### 5-1. ì§ì ‘ ì‹¤í–‰ ì¢…ë£Œ

```bash
Ctrl + C
```

### 5-2. ë°±ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ

**nohup ì‚¬ìš© ì‹œ:**
```bash
ps aux | grep app_flask.py
kill [PID]
```

**screen ì‚¬ìš© ì‹œ:**
```bash
screen -r attendance
Ctrl + C
exit
```

**systemd ì‚¬ìš© ì‹œ:**
```bash
sudo systemctl stop slack-attendance
```

---

## 6ï¸âƒ£ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: ìŠ¤ì¼€ì¤„ì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

**ì›ì¸:**
- ì„œë²„ ì‹œê°„ëŒ€ê°€ ë‹¤ë¦„
- ìŠ¤ì¼€ì¤„ ì„¤ì •ì´ ì €ì¥ë˜ì§€ ì•ŠìŒ

**í•´ê²°:**
```bash
# ì„œë²„ ì‹œê°„ëŒ€ í™•ì¸
date
timedatectl

# í•œêµ­ ì‹œê°„ëŒ€ë¡œ ë³€ê²½ (í•„ìš”ì‹œ)
sudo timedatectl set-timezone Asia/Seoul

# workspace.json í™•ì¸
cat workspaces/ì„œìš¸ëŒ€/workspace.json
```

### ë¬¸ì œ 2: ìŠ¤ë ˆë“œê°€ ìƒì„±ë˜ì§€ ì•ŠìŒ

**ì›ì¸:**
- ìŠ¬ë™ Bot Token ê¶Œí•œ ë¶€ì¡±
- ì±„ë„ì— ë´‡ì´ ì¶”ê°€ë˜ì§€ ì•ŠìŒ

**í•´ê²°:**
1. ìŠ¬ë™ API í˜ì´ì§€ì—ì„œ `chat:write` ê¶Œí•œ í™•ì¸
2. ì±„ë„ì—ì„œ `/invite @ì¶œì„ì²´í¬ë´‡` ì‹¤í–‰

### ë¬¸ì œ 3: êµ¬ê¸€ ì‹œíŠ¸ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨

**ì›ì¸:**
- credentials.json íŒŒì¼ì´ ì„œë²„ì— ì—†ìŒ
- ì„œë¹„ìŠ¤ ê³„ì •ì— ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ê³µìœ  ì•ˆ ë¨

**í•´ê²°:**
1. credentials.json íŒŒì¼ í™•ì¸
2. êµ¬ê¸€ ì‹œíŠ¸ì—ì„œ ì„œë¹„ìŠ¤ ê³„ì • ì´ë©”ì¼ë¡œ ê³µìœ  í™•ì¸

---

## 7ï¸âƒ£ ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] workspaces/*/credentials.json íŒŒì¼ ê¶Œí•œ ì„¤ì • (600)
- [ ] workspaces/*/workspace.json íŒŒì¼ ê¶Œí•œ ì„¤ì • (600)
- [ ] Git ì €ì¥ì†Œì— ë¯¼ê° ì •ë³´ ì»¤ë°‹í•˜ì§€ ì•Šê¸° (.gitignore ì„¤ì •)
- [ ] ì„œë²„ ë°©í™”ë²½ ì„¤ì • (5000 í¬íŠ¸ ì™¸ë¶€ ì ‘ê·¼ ì°¨ë‹¨)
- [ ] systemd ì„œë¹„ìŠ¤ ì‹¤í–‰ ì‹œ ì¼ë°˜ ì‚¬ìš©ì ê¶Œí•œ ì‚¬ìš© (root ê¸ˆì§€)

```bash
# íŒŒì¼ ê¶Œí•œ ì„¤ì •
chmod 600 workspaces/*/credentials.json
chmod 600 workspaces/*/workspace.json
```

---

## 8ï¸âƒ£ ì—…ë°ì´íŠ¸ ë°©ë²•

### ì„¤ì • ë³€ê²½ ì‹œ:

```bash
# ë¡œì»¬ PCì—ì„œ ì›¹ UIë¡œ ìŠ¤ì¼€ì¤„ ì¬ì„¤ì •
ì‹¤í–‰.bat â†’ ì›¹ UI â†’ ìŠ¤ì¼€ì¤„ ìˆ˜ì • â†’ ì €ì¥

# workspaces/ í´ë”ë§Œ ì„œë²„ë¡œ ì¬ì „ì†¡
scp -r workspaces/ user@server:/path/to/project/

# ì„œë²„ì—ì„œ ì¬ì‹œì‘
sudo systemctl restart slack-attendance
```

### ì½”ë“œ ì—…ë°ì´íŠ¸ ì‹œ:

```bash
# ë¡œì»¬ì—ì„œ Git push
git add .
git commit -m "Update code"
git push origin main

# ì„œë²„ì—ì„œ Git pull
git pull origin main

# ì„œë²„ ì¬ì‹œì‘
sudo systemctl restart slack-attendance
```

---

## 9ï¸âƒ£ ëª¨ë‹ˆí„°ë§

### ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸:

```bash
# systemd ì‚¬ìš© ì‹œ
sudo journalctl -u slack-attendance -f

# nohup ì‚¬ìš© ì‹œ
tail -f server.log
```

### ìŠ¤ì¼€ì¤„ ì‹¤í–‰ í™•ì¸:

```bash
# ì¶œë ¥ ë¡œê·¸ì—ì„œ ë‹¤ìŒ ì‹¤í–‰ ì‹œê°„ í™•ì¸
grep "ìŠ¤ì¼€ì¤„ ë“±ë¡" server.log
```

---

ì™„ë£Œ! ì´ì œ ì„œë²„ê°€ ìë™ìœ¼ë¡œ ìŠ¤ì¼€ì¤„ì— ë§ì¶° ì¶œì„ì²´í¬ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤. ğŸ‰
