# 추가 업그레이드 제안

현재 시스템에서 더욱 개선할 수 있는 기능들을 제안합니다.

---

## 우선순위 높음 (High Priority)

### 1. 출석 통계 대시보드

**개요**: 각 워크스페이스별 출석 통계를 시각화하는 대시보드

**기능:**
- 워크스페이스별 출석률 그래프 (일별, 주별, 월별)
- 개인별 출석 현황 (전체 출석률, 연속 출석일수)
- 미출석자 통계 및 트렌드 분석
- 출석률 상위/하위 학생 순위

**구현 방법:**
```python
# 데이터 저장: JSON 또는 SQLite 데이터베이스
# 시각화: Chart.js 또는 Plotly
# 웹 UI에 새로운 라우트 추가
@app.route('/dashboard/<workspace_name>')
def dashboard(workspace_name):
    # 출석 데이터 로드 및 통계 계산
    # 그래프 렌더링
```

**예상 소요 시간**: 4-6시간

---

### 2. 출석 히스토리 로깅

**개요**: 모든 출석체크 실행 내역을 데이터베이스에 저장

**기능:**
- 출석체크 실행 시 결과를 JSON 파일 또는 DB에 저장
- 날짜별, 워크스페이스별 출석 내역 조회
- 엑셀/CSV 다운로드 기능
- 특정 학생의 전체 출석 히스토리 조회

**데이터 구조 예시:**
```json
{
  "timestamp": "2025-10-16T18:00:00",
  "workspace": "서울대",
  "column": "K",
  "total_students": 50,
  "present": 45,
  "absent": 5,
  "present_list": ["홍길동", "김철수", ...],
  "absent_list": ["이영희", ...]
}
```

**구현 방법:**
- `logs/attendance_history/` 폴더에 JSON 파일 저장
- 또는 SQLite 데이터베이스 사용

**예상 소요 시간**: 3-4시간

---

### 3. 웹 기반 스케줄 관리

**개요**: 웹 UI에서 직접 스케줄을 추가/수정/삭제

**기능:**
- 스케줄 목록 보기 (활성/비활성 상태 표시)
- 새 스케줄 추가 (드롭다운으로 워크스페이스 선택)
- 기존 스케줄 수정/삭제
- 스케줄 일시 정지/재개
- 즉시 실행 버튼 (테스트용)

**화면 구성:**
```
┌─────────────────────────────────────┐
│ 스케줄 관리                          │
├─────────────────────────────────────┤
│ + 새 스케줄 추가                     │
├─────────────────────────────────────┤
│ 서울대 토요일 출석                   │
│ 토요일 18:00 | K열 | ✓활성           │
│ [수정] [삭제] [즉시실행]             │
├─────────────────────────────────────┤
│ 연세대 일요일 출석                   │
│ 일요일 20:30 | H열 | ✗비활성         │
│ [수정] [삭제] [즉시실행]             │
└─────────────────────────────────────┘
```

**구현 방법:**
- Flask 라우트 추가: `/api/schedules` (CRUD)
- JavaScript로 동적 UI 구현
- `config/schedules.json` 파일 자동 업데이트
- 스케줄 변경 시 스케줄러 재시작

**예상 소요 시간**: 5-7시간

---

## 우선순위 중간 (Medium Priority)

### 4. 엑셀 내보내기 기능

**개요**: 출석 데이터를 엑셀 파일로 다운로드

**기능:**
- 워크스페이스별 전체 출석 데이터 엑셀 다운로드
- 특정 기간 데이터 필터링
- 통계 시트 자동 생성 (출석률, 평균 등)

**구현 방법:**
```python
import pandas as pd
from openpyxl import Workbook

@app.route('/export/<workspace_name>')
def export_excel(workspace_name):
    # 구글 시트에서 데이터 읽기
    # pandas DataFrame 생성
    # 엑셀 파일로 변환 및 다운로드
    return send_file('attendance.xlsx', as_attachment=True)
```

**예상 소요 시간**: 2-3시간

---

### 5. 알림 커스터마이징

**개요**: 슬랙 알림 메시지를 사용자가 원하는 형식으로 커스터마이징

**기능:**
- 알림 메시지 템플릿 설정
- 미출석자 DM 자동 발송 옵션
- 출석률이 특정 % 이하일 때만 알림
- 이모지/서식 커스터마이징

**설정 예시:**
```json
{
  "notification_settings": {
    "thread_message_template": "✅ 자동 출석체크 완료\n출석: {present_count}명 / 미출석: {absent_count}명",
    "send_dm_to_thread_author": true,
    "send_dm_to_absentees": false,
    "minimum_attendance_rate_for_alert": 80
  }
}
```

**예상 소요 시간**: 3-4시간

---

### 6. 다중 시트 지원

**개요**: 하나의 스프레드시트에서 여러 시트를 관리

**기능:**
- 여러 시트에 동시에 출석 체크
- 시트별 설정 (이름 열, 시작 행 등)
- 예: "1학년", "2학년", "3학년" 시트 동시 처리

**설정 예시:**
```json
{
  "sheets": [
    {
      "sheet_name": "1학년",
      "name_column": "B",
      "start_row": 2
    },
    {
      "sheet_name": "2학년",
      "name_column": "B",
      "start_row": 2
    }
  ]
}
```

**예상 소요 시간**: 4-5시간

---

### 7. 지각 처리 기능

**개요**: 특정 시간 이후 출석한 학생을 "지각(△)"으로 표시

**기능:**
- 스케줄에 지각 시간 설정 (예: 18시 30분 이후는 지각)
- 지각자 자동 △ 표시
- 지각자 리스트 별도 표시

**설정 예시:**
```json
{
  "name": "토요일 출석",
  "hour": 18,
  "minute": 0,
  "late_cutoff_minutes": 30,  // 18:30 이후 지각
  "mark_late": true
}
```

**구현 방법:**
- 슬랙 댓글의 타임스탬프와 출석 시간 비교
- 지각자는 `AttendanceStatus.LATE` (△) 표시

**예상 소요 시간**: 2-3시간

---

## 우선순위 낮음 (Low Priority)

### 8. 모바일 앱 지원

**개요**: React Native 또는 Flutter로 모바일 앱 개발

**기능:**
- 스마트폰에서 출석 현황 조회
- 푸시 알림 (출석체크 완료 시)
- 간단한 수동 출석체크 실행

**예상 소요 시간**: 20-30시간 (별도 프로젝트)

---

### 9. 머신러닝 기반 예측

**개요**: 과거 출석 데이터를 학습하여 미출석 가능성 예측

**기능:**
- 학생별 출석 패턴 분석
- 미출석 가능성 높은 학생 사전 알림
- 출석률 예측 그래프

**예상 소요 시간**: 15-20시간

---

### 10. 다국어 지원

**개요**: 영어, 중국어 등 다국어 UI 지원

**기능:**
- 언어 선택 옵션
- 모든 메시지/UI 다국어 번역

**예상 소요 시간**: 5-8시간

---

## 즉시 구현 가능한 간단한 개선사항

### A. 로그 레벨 설정

**현재**: 모든 로그가 INFO 레벨로 저장
**개선**: DEBUG/INFO/WARNING/ERROR 레벨 선택 가능

```python
# config/settings.json
{
  "log_level": "INFO"  // DEBUG, INFO, WARNING, ERROR
}
```

**예상 소요 시간**: 30분

---

### B. 건강 체크 엔드포인트

**개요**: 서버 상태를 확인할 수 있는 API

```python
@app.route('/health')
def health_check():
    return {
        "status": "ok",
        "scheduler_running": scheduler.scheduler.running,
        "active_jobs": len(scheduler.scheduler.get_jobs())
    }
```

**예상 소요 시간**: 30분

---

### C. 에러 알림 (슬랙)

**개요**: 출석체크 실행 중 오류 발생 시 슬랙으로 알림

```python
def run_attendance_check(self, schedule_config):
    try:
        # ... 기존 로직
    except Exception as e:
        # 관리자에게 슬랙 DM 전송
        slack_handler.send_dm(ADMIN_USER_ID, f"❌ 오류 발생: {e}")
```

**예상 소요 시간**: 1시간

---

### D. 백업 기능

**개요**: 중요 설정 파일 자동 백업

```python
# 매일 자동으로 workspaces/, config/ 폴더 백업
# backups/2025-10-16/ 형식으로 저장
```

**예상 소요 시간**: 1-2시간

---

## 권장 구현 순서

단계별로 구현을 진행한다면 다음 순서를 권장합니다:

1. **단계 1 (1주차)**
   - 출석 히스토리 로깅 (#2)
   - 엑셀 내보내기 (#4)
   - 간단한 개선사항 (A, B, C, D)

2. **단계 2 (2주차)**
   - 웹 기반 스케줄 관리 (#3)
   - 지각 처리 기능 (#7)

3. **단계 3 (3주차)**
   - 출석 통계 대시보드 (#1)
   - 알림 커스터마이징 (#5)

4. **단계 4 (4주차+)**
   - 다중 시트 지원 (#6)
   - 기타 고급 기능 (필요시)

---

## 비용 대비 효과 분석

| 기능 | 개발 시간 | 사용자 편의성 | 유지보수 난이도 | 추천도 |
|------|----------|--------------|----------------|--------|
| 출석 히스토리 (#2) | 3-4h | ★★★★★ | 낮음 | ★★★★★ |
| 웹 스케줄 관리 (#3) | 5-7h | ★★★★★ | 중간 | ★★★★★ |
| 통계 대시보드 (#1) | 4-6h | ★★★★☆ | 중간 | ★★★★☆ |
| 엑셀 내보내기 (#4) | 2-3h | ★★★★☆ | 낮음 | ★★★★☆ |
| 지각 처리 (#7) | 2-3h | ★★★☆☆ | 낮음 | ★★★☆☆ |
| 알림 커스터마이징 (#5) | 3-4h | ★★★☆☆ | 중간 | ★★★☆☆ |
| 다중 시트 (#6) | 4-5h | ★★☆☆☆ | 높음 | ★★☆☆☆ |

---

구현하고 싶은 기능이 있으면 알려주세요!
